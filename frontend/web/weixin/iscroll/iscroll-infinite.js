!function(e,s,t){function n(t,e){this.wrapper="string"==typeof t?s.querySelector(t):t,this.scroller=this.wrapper.children[0],this.scrollerStyle=this.scroller.style,this.options={mouseWheelSpeed:20,snapThreshold:.334,infiniteUseTransform:!0,deceleration:.004,startX:0,startY:0,scrollY:!0,directionLockThreshold:5,momentum:!0,bounce:!0,bounceTime:600,bounceEasing:"",preventDefault:!0,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:!0,useTransition:!0,useTransform:!0};for(var n in e)this.options[n]=e[n];this.translateZ=this.options.HWCompositing&&i.hasPerspective?" translateZ(0)":"",this.options.useTransition=i.hasTransition&&this.options.useTransition,this.options.useTransform=i.hasTransform&&this.options.useTransform,this.options.eventPassthrough=this.options.eventPassthrough===!0?"vertical":this.options.eventPassthrough,this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault,this.options.scrollY="vertical"==this.options.eventPassthrough?!1:this.options.scrollY,this.options.scrollX="horizontal"==this.options.eventPassthrough?!1:this.options.scrollX,this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough,this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold,this.options.bounceEasing="string"==typeof this.options.bounceEasing?i.ease[this.options.bounceEasing]||i.ease.circular:this.options.bounceEasing,this.options.resizePolling=void 0===this.options.resizePolling?60:this.options.resizePolling,this.options.tap===!0&&(this.options.tap="tap"),this.options.invertWheelDirection=this.options.invertWheelDirection?-1:1,this.options.infiniteElements&&(this.options.probeType=3),this.options.infiniteUseTransform=this.options.infiniteUseTransform&&this.options.useTransform,3==this.options.probeType&&(this.options.useTransition=!1),this.x=0,this.y=0,this.directionX=0,this.directionY=0,this._events={},this._init(),this.refresh(),this.scrollTo(this.options.startX,this.options.startY),this.enable()}var o=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(t){e.setTimeout(t,1e3/60)},i=function(){function n(t){return h===!1?!1:""===h?t:h+t.charAt(0).toUpperCase()+t.substr(1)}var i={},o=s.createElement("div").style,h=function(){for(var e,i=["t","webkitT","MozT","msT","OT"],t=0,s=i.length;s>t;t++)if(e=i[t]+"ransform",e in o)return i[t].substr(0,i[t].length-1);return!1}();i.getTime=Date.now||function(){return(new Date).getTime()},i.extend=function(e,t){for(var i in t)e[i]=t[i]},i.addEvent=function(t,i,e,s){t.addEventListener(i,e,!!s)},i.removeEvent=function(t,i,e,s){t.removeEventListener(i,e,!!s)},i.prefixPointerEvent=function(t){return e.MSPointerEvent?"MSPointer"+t.charAt(9).toUpperCase()+t.substr(10):t},i.momentum=function(o,l,p,a,h,n){var i,r,s=o-l,e=t.abs(s)/p;return n=void 0===n?6e-4:n,i=o+e*e/(2*n)*(0>s?-1:1),r=e/n,a>i?(i=h?a-h/2.5*(e/8):a,s=t.abs(i-o),r=s/e):i>0&&(i=h?h/2.5*(e/8):0,s=t.abs(o)+i,r=s/e),{destination:t.round(i),duration:r}};var r=n("transform");return i.extend(i,{hasTransform:r!==!1,hasPerspective:n("perspective")in o,hasTouch:"ontouchstart"in e,hasPointer:e.PointerEvent||e.MSPointerEvent,hasTransition:n("transition")in o}),i.isBadAndroid=/Android /.test(e.navigator.appVersion)&&!/Chrome\/\d/.test(e.navigator.appVersion),i.extend(i.style={},{transform:r,transitionTimingFunction:n("transitionTimingFunction"),transitionDuration:n("transitionDuration"),transitionDelay:n("transitionDelay"),transformOrigin:n("transformOrigin")}),i.hasClass=function(t,i){var e=new RegExp("(^|\\s)"+i+"(\\s|$)");return e.test(t.className)},i.addClass=function(t,e){if(!i.hasClass(t,e)){var s=t.className.split(" ");s.push(e),t.className=s.join(" ")}},i.removeClass=function(t,e){if(i.hasClass(t,e)){var s=new RegExp("(^|\\s)"+e+"(\\s|$)","g");t.className=t.className.replace(s," ")}},i.offset=function(t){for(var i=-t.offsetLeft,e=-t.offsetTop;t=t.offsetParent;)i-=t.offsetLeft,e-=t.offsetTop;return{left:i,top:e}},i.preventDefaultException=function(e,t){for(var i in t)if(t[i].test(e[i]))return!0;return!1},i.extend(i.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,pointerdown:3,pointermove:3,pointerup:3,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3}),i.extend(i.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(t){return t*(2-t)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(i){return t.sqrt(1- --i*i)}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(t){var i=4;return(t-=1)*t*((i+1)*t+i)+1}},bounce:{style:"",fn:function(t){return(t/=1)<1/2.75?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}},elastic:{style:"",fn:function(i){var e=.22,s=.4;return 0===i?0:1==i?1:s*t.pow(2,-10*i)*t.sin(2*(i-e/4)*t.PI/e)+1}}}),i.tap=function(i,e){var t=s.createEvent("Event");t.initEvent(e,!0,!0),t.pageX=i.pageX,t.pageY=i.pageY,i.target.dispatchEvent(t)},i.click=function(t){var e,i=t.target;/(SELECT|INPUT|TEXTAREA)/i.test(i.tagName)||(e=s.createEvent("MouseEvents"),e.initMouseEvent("click",!0,!0,t.view,1,i.screenX,i.screenY,i.clientX,i.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,0,null),e._constructed=!0,i.dispatchEvent(e))},i}();n.prototype={version:"5.1.3",_init:function(){this._initEvents(),this.options.mouseWheel&&this._initWheel(),this.options.snap&&this._initSnap(),this.options.keyBindings&&this._initKeys(),this.options.infiniteElements&&this._initInfinite()},destroy:function(){this._initEvents(!0),this._execEvent("destroy")},_transitionEnd:function(t){t.target==this.scroller&&this.isInTransition&&(this._transitionTime(),this.resetPosition(this.options.bounceTime)||(this.isInTransition=!1,this._execEvent("scrollEnd")))},_start:function(e){if(!(1!=i.eventType[e.type]&&0!==e.button||!this.enabled||this.initiated&&i.eventType[e.type]!==this.initiated)){!this.options.preventDefault||i.isBadAndroid||i.preventDefaultException(e.target,this.options.preventDefaultException)||e.preventDefault();var s,n=e.touches?e.touches[0]:e;this.initiated=i.eventType[e.type],this.moved=!1,this.distX=0,this.distY=0,this.directionX=0,this.directionY=0,this.directionLocked=0,this._transitionTime(),this.startTime=i.getTime(),this.options.useTransition&&this.isInTransition?(this.isInTransition=!1,s=this.getComputedPosition(),this._translate(t.round(s.x),t.round(s.y)),this._execEvent("scrollEnd")):!this.options.useTransition&&this.isAnimating&&(this.isAnimating=!1,this._execEvent("scrollEnd")),this.startX=this.x,this.startY=this.y,this.absStartX=this.x,this.absStartY=this.y,this.pointX=n.pageX,this.pointY=n.pageY,this._execEvent("beforeScrollStart")}},_move:function(n){if(this.enabled&&i.eventType[n.type]===this.initiated){this.options.preventDefault&&n.preventDefault();var o,h,r,a,l=n.touches?n.touches[0]:n,e=l.pageX-this.pointX,s=l.pageY-this.pointY,p=i.getTime();this.pointX=l.pageX,this.pointY=l.pageY,this.distX+=e,this.distY+=s,r=t.abs(this.distX),a=t.abs(this.distY);var c=this.options.moveThreshold||10;if(!(p-this.endTime>300&&c>r&&c>a)){if(this.directionLocked||this.options.freeScroll||(this.directionLocked=r>a+this.options.directionLockThreshold?"h":a>=r+this.options.directionLockThreshold?"v":"n"),"h"==this.directionLocked){if("vertical"==this.options.eventPassthrough)n.preventDefault();else if("horizontal"==this.options.eventPassthrough)return void(this.initiated=!1);s=0}else if("v"==this.directionLocked){if("horizontal"==this.options.eventPassthrough)n.preventDefault();else if("vertical"==this.options.eventPassthrough)return void(this.initiated=!1);e=0}e=this.hasHorizontalScroll?e:0,s=this.hasVerticalScroll?s:0,o=this.x+e,h=this.y+s,(o>0||o<this.maxScrollX)&&(o=this.options.bounce?this.x+e/3:o>0?0:this.maxScrollX),(h>0||h<this.maxScrollY)&&(h=this.options.bounce?this.y+s/3:h>0?0:this.maxScrollY),this.directionX=e>0?-1:0>e?1:0,this.directionY=s>0?-1:0>s?1:0,this.moved||this._execEvent("scrollStart"),this.moved=!0,this._translate(o,h),p-this.startTime>300&&(this.startTime=p,this.startX=this.x,this.startY=this.y,1==this.options.probeType&&this._execEvent("scroll")),this.options.probeType>1&&this._execEvent("scroll")}}},_end:function(n){if(this.enabled&&i.eventType[n.type]===this.initiated){this.options.preventDefault&&!i.preventDefaultException(n.target,this.options.preventDefaultException)&&n.preventDefault();var a,r,h=(n.changedTouches?n.changedTouches[0]:n,i.getTime()-this.startTime),s=t.round(this.x),e=t.round(this.y),c=t.abs(s-this.startX),f=t.abs(e-this.startY),l=0,p="";if(this.isInTransition=0,this.initiated=0,this.endTime=i.getTime(),!this.resetPosition(this.options.bounceTime)){if(this.scrollTo(s,e),!this.moved)return this.options.tap&&i.tap(n,this.options.tap),this.options.click&&i.click(n),void this._execEvent("scrollCancel");if(this._events.flick&&200>h&&100>c&&100>f)return void this._execEvent("flick");if(this.options.momentum&&300>h&&(a=this.hasHorizontalScroll?i.momentum(this.x,this.startX,h,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration):{destination:s,duration:0},r=this.hasVerticalScroll?i.momentum(this.y,this.startY,h,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration):{destination:e,duration:0},s=a.destination,e=r.destination,l=t.max(a.duration,r.duration),this.isInTransition=1),this.options.snap){var o=this._nearestSnap(s,e);this.snap=o,this.currentPage=o,l=this.options.snapSpeed||t.max(t.max(t.min(t.abs(s-o.x),1e3),t.min(t.abs(e-o.y),1e3)),300),s=o.x,e=o.y,this.directionX=0,this.directionY=0,p=this.options.bounceEasing}return s!=this.x||e!=this.y?((s>0||s<this.maxScrollX||e>0||e<this.maxScrollY)&&(p=i.ease.quadratic),this.scrollTo(s,e,l,p),void this._execEvent("scroll")):void this._execEvent("scrollEnd")}if(this.options.snap){var o=this._nearestSnap(s,e);this.snap=o,this.currentPage=o}}},_resize:function(){var t=this;clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){t.refresh()},this.options.resizePolling)},resetPosition:function(e){var t=this.x,i=this.y;return e=e||0,!this.hasHorizontalScroll||this.x>0?t=0:this.x<this.maxScrollX&&(t=this.maxScrollX),!this.hasVerticalScroll||this.y>0?i=0:this.y<this.maxScrollY&&(i=this.maxScrollY),t==this.x&&i==this.y?!1:(this.scrollTo(t,i,e,this.options.bounceEasing),!0)},disable:function(){this.enabled=!1},enable:function(){this.enabled=!0},refresh:function(){this.wrapper.offsetHeight;this.wrapperWidth=this.wrapper.clientWidth,this.wrapperHeight=this.wrapper.clientHeight,this.scrollerWidth=this.scroller.offsetWidth,this.scrollerHeight=this.scroller.offsetHeight,this.maxScrollX=this.wrapperWidth-this.scrollerWidth;var e;this.options.infiniteElements&&(this.options.infiniteLimit=this.options.infiniteLimit||t.floor(2147483645/this.infiniteElementHeight),e=-this.options.infiniteLimit*this.infiniteElementHeight+this.wrapperHeight-this.infinitePaddinTop-(this.options.infinitePaddingBottom||0),e=t.min(e,-1)),this.maxScrollY=void 0!==e?e:this.wrapperHeight-this.scrollerHeight,this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0,this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0,this.hasHorizontalScroll||(this.maxScrollX=0,this.scrollerWidth=this.wrapperWidth),this.hasVerticalScroll||(this.maxScrollY=0,this.scrollerHeight=this.wrapperHeight),this.endTime=0,this.directionX=0,this.directionY=0,this.wrapperOffset=i.offset(this.wrapper),this._execEvent("refresh"),this.resetPosition()},on:function(t,i){this._events[t]||(this._events[t]=[]),this._events[t].push(i)},off:function(t,e){if(this._events[t]){var i=this._events[t].indexOf(e);i>-1&&this._events[t].splice(i,1)}},_execEvent:function(t){if(this._events[t]){var i=0,e=this._events[t].length;if(e)for(;e>i;i++)this._events[t][i].apply(this,[].slice.call(arguments,1))}},scrollBy:function(t,i,e,s){t=this.x+t,i=this.y+i,e=e||0,this.scrollTo(t,i,e,s)},scrollTo:function(s,n,e,t){t=t||i.ease.circular,this.isInTransition=this.options.useTransition&&e>0,!e||this.options.useTransition&&t.style?(this._transitionTimingFunction(t.style),this._transitionTime(e),this._translate(s,n),this.options.infiniteElements&&this.reorderInfinite()):this._animate(s,n,e,t.fn)},scrollToElement:function(s,n,o,h,r){if(s=s.nodeType?s:this.scroller.querySelector(s)){var e=i.offset(s);e.left-=this.wrapperOffset.left,e.top-=this.wrapperOffset.top,o===!0&&(o=t.round(s.offsetWidth/2-this.wrapper.offsetWidth/2)),h===!0&&(h=t.round(s.offsetHeight/2-this.wrapper.offsetHeight/2)),e.left-=o||0,e.top-=h||0,e.left=e.left>0?0:e.left<this.maxScrollX?this.maxScrollX:e.left,e.top=e.top>0?0:e.top<this.maxScrollY?this.maxScrollY:e.top,n=void 0===n||null===n||"auto"===n?t.max(t.abs(this.x-e.left),t.abs(this.y-e.top)):n,this.scrollTo(e.left,e.top,n,r)}},_transitionTime:function(t){t=t||0,this.scrollerStyle[i.style.transitionDuration]=t+"ms",!t&&i.isBadAndroid&&(this.scrollerStyle[i.style.transitionDuration]="0.001s")},_transitionTimingFunction:function(t){this.scrollerStyle[i.style.transitionTimingFunction]=t},_translate:function(e,s){this.options.useTransform?this.scrollerStyle[i.style.transform]="translate("+e+"px,"+s+"px)"+this.translateZ:(e=t.round(e),s=t.round(s),this.scrollerStyle.left=e+"px",this.scrollerStyle.top=s+"px"),this.x=e,this.y=s},_initEvents:function(n){var t=n?i.removeEvent:i.addEvent,s=this.options.bindToWrapper?this.wrapper:e;t(e,"orientationchange",this),t(e,"resize",this),this.options.click&&t(this.wrapper,"click",this,!0),this.options.disableMouse||(t(this.wrapper,"mousedown",this),t(s,"mousemove",this),t(s,"mousecancel",this),t(s,"mouseup",this)),i.hasPointer&&!this.options.disablePointer&&(t(this.wrapper,i.prefixPointerEvent("pointerdown"),this),t(s,i.prefixPointerEvent("pointermove"),this),t(s,i.prefixPointerEvent("pointercancel"),this),t(s,i.prefixPointerEvent("pointerup"),this)),i.hasTouch&&!this.options.disableTouch&&(t(this.wrapper,"touchstart",this),t(s,"touchmove",this),t(s,"touchcancel",this),t(s,"touchend",this)),t(this.scroller,"transitionend",this),t(this.scroller,"webkitTransitionEnd",this),t(this.scroller,"oTransitionEnd",this),t(this.scroller,"MSTransitionEnd",this)},getComputedPosition:function(){var s,n,t=e.getComputedStyle(this.scroller,null);return this.options.useTransform?(t=t[i.style.transform].split(")")[0].split(", "),s=+(t[12]||t[4]),n=+(t[13]||t[5])):(s=+t.left.replace(/[^-\d.]/g,""),n=+t.top.replace(/[^-\d.]/g,"")),{x:s,y:n}},_initWheel:function(){i.addEvent(this.wrapper,"wheel",this),i.addEvent(this.wrapper,"mousewheel",this),i.addEvent(this.wrapper,"DOMMouseScroll",this),this.on("destroy",function(){i.removeEvent(this.wrapper,"wheel",this),i.removeEvent(this.wrapper,"mousewheel",this),i.removeEvent(this.wrapper,"DOMMouseScroll",this)})},_wheel:function(i){if(this.enabled){i.preventDefault(),i.stopPropagation();var s,e,n,o,h=this;if(void 0===this.wheelTimeout&&h._execEvent("scrollStart"),clearTimeout(this.wheelTimeout),this.wheelTimeout=setTimeout(function(){h._execEvent("scrollEnd"),h.wheelTimeout=void 0},400),"deltaX"in i)1===i.deltaMode?(s=-i.deltaX*this.options.mouseWheelSpeed,e=-i.deltaY*this.options.mouseWheelSpeed):(s=-i.deltaX,e=-i.deltaY);else if("wheelDeltaX"in i)s=i.wheelDeltaX/120*this.options.mouseWheelSpeed,e=i.wheelDeltaY/120*this.options.mouseWheelSpeed;else if("wheelDelta"in i)s=e=i.wheelDelta/120*this.options.mouseWheelSpeed;else{if(!("detail"in i))return;s=e=-i.detail/3*this.options.mouseWheelSpeed}if(s*=this.options.invertWheelDirection,e*=this.options.invertWheelDirection,this.hasVerticalScroll||(s=e,e=0),this.options.snap)return n=this.currentPage.pageX,o=this.currentPage.pageY,s>0?n--:0>s&&n++,e>0?o--:0>e&&o++,void this.goToPage(n,o);n=this.x+t.round(this.hasHorizontalScroll?s:0),o=this.y+t.round(this.hasVerticalScroll?e:0),n>0?n=0:n<this.maxScrollX&&(n=this.maxScrollX),o>0?o=0:o<this.maxScrollY&&(o=this.maxScrollY),this.scrollTo(n,o,0),this.options.probeType>1&&this._execEvent("scroll")}},_initSnap:function(){this.currentPage={},"string"==typeof this.options.snap&&(this.options.snap=this.scroller.querySelectorAll(this.options.snap)),this.on("refresh",function(){var r,c,p,l,n,e,i=0,h=0,s=0,o=this.options.snapStepX||this.wrapperWidth,a=this.options.snapStepY||this.wrapperHeight;if(this.pages=[],this.wrapperWidth&&this.wrapperHeight&&this.scrollerWidth&&this.scrollerHeight){if(this.options.snap===!0)if(p=t.round(o/2),l=t.round(a/2),this.options.infiniteElements)this.infiniteSnap={stepX:o,stepY:a,maxPageX:-t.ceil(this.maxScrollX/o),maxPageY:-t.ceil(this.maxScrollY/a)};else for(;s>-this.scrollerWidth;){for(this.pages[i]=[],r=0,n=0;n>-this.scrollerHeight;)this.pages[i][r]={x:t.max(s,this.maxScrollX),y:t.max(n,this.maxScrollY),width:o,height:a,cx:s-p,cy:n-l},n-=a,r++;s-=o,i++}else for(e=this.options.snap,r=e.length,c=-1;r>i;i++)(0===i||e[i].offsetLeft<=e[i-1].offsetLeft)&&(h=0,c++),this.pages[h]||(this.pages[h]=[]),s=t.max(-e[i].offsetLeft,this.maxScrollX),n=t.max(-e[i].offsetTop,this.maxScrollY),p=s-t.round(e[i].offsetWidth/2),l=n-t.round(e[i].offsetHeight/2),this.pages[h][c]={x:s,y:n,width:e[i].offsetWidth,height:e[i].offsetHeight,cx:p,cy:l},s>this.maxScrollX&&h++;this.options.snapThreshold%1===0?(this.snapThresholdX=this.options.snapThreshold,this.snapThresholdY=this.options.snapThreshold):this.options.infiniteElements?(this.snapThresholdX=t.round(this.infiniteSnap.stepX*this.options.snapThreshold),this.snapThresholdY=t.round(this.infiniteSnap.stepY*this.options.snapThreshold)):(this.snapThresholdX=t.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width*this.options.snapThreshold),this.snapThresholdY=t.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height*this.options.snapThreshold))}})},_nearestSnap:function(s,n){var i=0,o=0,e=0;if(t.abs(s-this.absStartX)<this.snapThresholdX&&t.abs(n-this.absStartY)<this.snapThresholdY)return this.currentPage;if(s>0?s=0:s<this.maxScrollX&&(s=this.maxScrollX),n>0?n=0:n<this.maxScrollY&&(n=this.maxScrollY),this.options.infiniteElements)return i=t.round(s/this.infiniteSnap.stepX),e=t.round(n/this.infiniteSnap.stepY),{x:i*this.infiniteSnap.stepX,y:e*this.infiniteSnap.stepY,pageX:i,pageY:e};for(;o>i;i++)if(s>=this.pages[i][0].cx){s=this.pages[i][0].x;break}for(o=this.pages[i].length;o>e;e++)if(n>=this.pages[0][e].cy){n=this.pages[0][e].y;break}return i==this.currentPage.pageX&&(i+=this.directionX,0>i?i=0:i>=this.pages.length&&(i=this.pages.length-1),s=this.pages[i][0].x),e==this.currentPage.pageY&&(e+=this.directionY,0>e?e=0:e>=this.pages[0].length&&(e=this.pages[0].length-1),n=this.pages[0][e].y),{x:s,y:n,pageX:i,pageY:e}},goToPage:function(i,e,o,h){h=h||this.options.bounceEasing;var s,n;this.options.infiniteElements?(i>=this.infiniteSnap.maxPageX?i=this.infiniteSnap.maxPageX:0>i&&(i=0),e>=this.infiniteSnap.maxPageY?e=this.infiniteSnap.maxPageY:0>e&&(e=0),s=-this.infiniteSnap.stepX*i,n=-this.infiniteSnap.stepY*e):(i>=this.pages.length?i=this.pages.length-1:0>i&&(i=0),e>=this.pages[i].length?e=this.pages[i].length-1:0>e&&(e=0),s=this.pages[i][e].x,n=this.pages[i][e].y),o=void 0===o?this.options.snapSpeed||t.max(t.max(t.min(t.abs(s-this.x),1e3),t.min(t.abs(n-this.y),1e3)),300):o,this.currentPage={x:s,y:n,pageX:i,pageY:e},this.scrollTo(s,n,o,h)},next:function(e,s){var t=this.currentPage.pageX,i=this.currentPage.pageY;t++,t>=this.pages.length&&this.hasVerticalScroll&&(t=0,i++),this.goToPage(t,i,e,s)},prev:function(e,s){var t=this.currentPage.pageX,i=this.currentPage.pageY;t--,0>t&&this.hasVerticalScroll&&(t=0,i--),this.goToPage(t,i,e,s)},_initKeys:function(){var t,s={pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40};if("object"==typeof this.options.keyBindings)for(t in this.options.keyBindings)"string"==typeof this.options.keyBindings[t]&&(this.options.keyBindings[t]=this.options.keyBindings[t].toUpperCase().charCodeAt(0));else this.options.keyBindings={};for(t in s)this.options.keyBindings[t]=this.options.keyBindings[t]||s[t];i.addEvent(e,"keydown",this),this.on("destroy",function(){i.removeEvent(e,"keydown",this)})},_key:function(r){if(this.enabled){var o,e=this.options.snap,s=e?this.currentPage.pageX:this.x,n=e?this.currentPage.pageY:this.y,h=i.getTime(),a=this.keyTime||0,l=.25;switch(this.options.useTransition&&this.isInTransition&&(o=this.getComputedPosition(),this._translate(t.round(o.x),t.round(o.y)),this.isInTransition=!1),this.keyAcceleration=200>h-a?t.min(this.keyAcceleration+l,50):0,r.keyCode){case this.options.keyBindings.pageUp:this.hasHorizontalScroll&&!this.hasVerticalScroll?s+=e?1:this.wrapperWidth:n+=e?1:this.wrapperHeight;break;case this.options.keyBindings.pageDown:this.hasHorizontalScroll&&!this.hasVerticalScroll?s-=e?1:this.wrapperWidth:n-=e?1:this.wrapperHeight;break;case this.options.keyBindings.end:s=e?this.pages.length-1:this.maxScrollX,n=e?this.pages[0].length-1:this.maxScrollY;break;case this.options.keyBindings.home:s=0,n=0;break;case this.options.keyBindings.left:s+=e?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.up:n+=e?1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.right:s-=e?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.down:n-=e?1:5+this.keyAcceleration>>0;break;default:return}if(e)return void this.goToPage(s,n);s>0?(s=0,this.keyAcceleration=0):s<this.maxScrollX&&(s=this.maxScrollX,this.keyAcceleration=0),n>0?(n=0,this.keyAcceleration=0):n<this.maxScrollY&&(n=this.maxScrollY,this.keyAcceleration=0),this.scrollTo(s,n,0),this.keyTime=h}},_animate:function(e,s,n,p){function h(){var d,m,u,f=i.getTime();return f>=c?(t.isAnimating=!1,t._translate(e,s),void(t.resetPosition(t.options.bounceTime)||t._execEvent("scrollEnd"))):(f=(f-l)/n,u=p(f),d=(e-r)*u+r,m=(s-a)*u+a,t._translate(d,m),t.isAnimating&&o(h),void(3==t.options.probeType&&t._execEvent("scroll")))}var t=this,r=this.x,a=this.y,l=i.getTime(),c=l+n;this.isAnimating=!0,h()},_initInfinite:function(){var i=this.options.infiniteElements;this.infiniteElements="string"==typeof i?s.querySelectorAll(i):i,this.infiniteElements=Array.prototype.slice.call(this.infiniteElements,0,this.options.infiniteLimit),this.infiniteLength=this.infiniteElements.length,this.infiniteMaster=this.infiniteElements[0],this.infinitePaddinTop=this.options.infinitePaddingTop||0,this.infiniteElementHeight=this.infiniteMaster.offsetHeight,this.infiniteHeight=this.infiniteLength*this.infiniteElementHeight,this.options.cacheSize=this.options.cacheSize||1e3,this.infiniteCacheBuffer=t.round(this.options.cacheSize/4),this.on("refresh",function(){var i=t.ceil(this.wrapperHeight/this.infiniteElementHeight);this.infiniteUpperBufferSize=t.floor((this.infiniteLength-i)/2),this.reorderInfinite()}),this.on("scroll",function(){this.reorderInfinite()}),this.on("destroy",function(){for(var t=0;t<this.infiniteElements.length;t++)this.infiniteElements[t]._top=null})},reload:function(){for(var t=0;t<this.infiniteElements.length;t++)this.infiniteElements[t]._top=null;this.infiniteCache={},this.options.dataset.call(this,0,this.options.cacheSize)},reorderInfinite:function(){for(var n,o=(-this.y+this.wrapperHeight/2,t.max(t.floor((-this.infinitePaddinTop-this.y)/this.infiniteElementHeight)-this.infiniteUpperBufferSize,0)),r=t.floor(o/this.infiniteLength),l=o-r*this.infiniteLength,s=this.infinitePaddinTop,e=0,a=[],h=t.floor(o/this.infiniteCacheBuffer);e<this.infiniteLength;)s=e*this.infiniteElementHeight+r*this.infiniteHeight,l>e&&(s+=this.infiniteElementHeight*this.infiniteLength),this.infiniteElements[e]._top!==s&&(n=s/this.infiniteElementHeight,this.infiniteElements[e]._phase=n,n<this.options.infiniteLimit&&this.infiniteCache&&n in this.infiniteCache&&(this.infiniteElements[e]._top=s,s+=this.infinitePaddinTop,this.options.infiniteUseTransform?(this.infiniteElements[e].style[i.style.transform]="translate(0, "+s+"px)"+this.translateZ,this.infiniteElements[e].style.top=0):this.infiniteElements[e].style.top=s+"px",a.push(this.infiniteElements[e]))),e++;this.cachePhase!=h&&(0===h||o-this.infiniteCacheBuffer>0)&&this.options.dataset.call(this,t.max(h*this.infiniteCacheBuffer-this.infiniteCacheBuffer,0),this.options.cacheSize),this.cachePhase=h,this.updateContent(a)},updateContent:function(i){if(void 0!==this.infiniteCache)for(var t=0,e=i.length;e>t;t++)this.options.dataFiller.call(this,i[t],this.infiniteCache[i[t]._phase],i[t]._phase)},updateCache:function(o,s,n){var h=void 0===this.infiniteCache;this.infiniteCache={};for(var e=0,r=s.length;r>e;e++)this.infiniteCache[o++]=s[e];if(n){this.options.infiniteLimit=n;var i;this.options.infiniteLimit=this.options.infiniteLimit||t.floor(2147483645/this.infiniteElementHeight),i=-this.options.infiniteLimit*this.infiniteElementHeight+this.wrapperHeight-this.infinitePaddinTop-(this.options.infinitePaddingBottom||0),i=t.min(i,-1),this.maxScrollY=void 0!==i?i:this.wrapperHeight-this.scrollerHeight}h&&this.updateContent(this.infiniteElements)},handleEvent:function(t){switch(t.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(t);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(t);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(t);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(t);break;case"wheel":case"DOMMouseScroll":case"mousewheel":this._wheel(t);break;case"keydown":this._key(t);break;case"click":t._constructed||(t.preventDefault(),t.stopPropagation())}}},n.utils=i,"undefined"!=typeof module&&module.exports?module.exports=n:e.IScroll=n}(window,document,Math);