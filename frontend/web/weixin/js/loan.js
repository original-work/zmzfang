lilv_array = new Array;
//08年12月23日基准利率
lilv_array[1] = new Array;
lilv_array[1][1] = new Array;
lilv_array[1][2] = new Array;
lilv_array[1][1][5] = 0.0576;//商贷 1～5年 5.76%
lilv_array[1][1][10] = 0.0594;//商贷 5-30年 5.94%
lilv_array[1][2][5] = 0.0333;//公积金 1～5年 3.33%
lilv_array[1][2][10] = 0.0387;//公积金 5-30年 3.87%
//10年10月20日基准利率
lilv_array[2] = new Array;
lilv_array[2][1] = new Array;
lilv_array[2][2] = new Array;
lilv_array[2][1][5] = 0.0596;//商贷 1～5年 5.96%
lilv_array[2][1][10] = 0.0614;//商贷 5-30年 6.14%
lilv_array[2][2][5] = 0.035;//公积金 1～5年 3.5%
lilv_array[2][2][10] = 0.0405;//公积金 5-30年 4.05%
//10年12月26日基准利率
lilv_array[3] = new Array;
lilv_array[3][1] = new Array;
lilv_array[3][2] = new Array;
lilv_array[3][1][5] = 0.0622;//商贷 1～5年 6.22%
lilv_array[3][1][10] = 0.0640;//商贷 5-30年 6.4%
lilv_array[3][2][5] = 0.0375;//公积金 1～5年 3.75%
lilv_array[3][2][10] = 0.0430;//公积金 5-30年 4.3%
//11年2月9日基准利率
lilv_array[4] = new Array;
lilv_array[4][1] = new Array;
lilv_array[4][2] = new Array;
lilv_array[4][1][5] = 0.0645;//商贷 1～5年 6.45%
lilv_array[4][1][10] = 0.0660;//商贷 5-30年 6.6%
lilv_array[4][2][5] = 0.0400;//公积金 1～5年 4%
lilv_array[4][2][10] = 0.0450;//公积金 5-30年 4.5%
//11年4月5日基准利率
lilv_array[5] = new Array;
lilv_array[5][1] = new Array;
lilv_array[5][2] = new Array;
lilv_array[5][1][5] = 0.0665;//商贷 1～5年 6.65%
lilv_array[5][1][10] = 0.0680;//商贷 5-30年 6.8%
lilv_array[5][2][5] = 0.0420;//公积金 1～5年 4.2%
lilv_array[5][2][10] = 0.0470;//公积金 5-30年 4.7%
//11年7月6日基准利率
lilv_array[6] = new Array;
lilv_array[6][1] = new Array;
lilv_array[6][2] = new Array;
lilv_array[6][1][5] = 0.0690;//商贷 1～5年 6.9%
lilv_array[6][1][10] = 0.0705;//商贷 5-30年 7.05%
lilv_array[6][2][5] = 0.0445;//公积金 1～5年 4.45%
lilv_array[6][2][10] = 0.0490;//公积金 5-30年 4.9%
//12年6月8日基准利率
lilv_array[7] = new Array;
lilv_array[7][1] = new Array;
lilv_array[7][2] = new Array;
lilv_array[7][1][5] = 0.0665;//商贷 1～5年 6.65%
lilv_array[7][1][10] = 0.0680;//商贷 5-30年 6.8%
lilv_array[7][2][5] = 0.0420;//公积金 1～5年 4.2%
lilv_array[7][2][10] = 0.0470;//公积金 5-30年 4.7%
//12年7月6日基准利率
lilv_array[8] = new Array;
lilv_array[8][1] = new Array;
lilv_array[8][2] = new Array;
lilv_array[8][1][5] = 0.0640;//商贷 1～5年 6.4%
lilv_array[8][1][10] = 0.0655;//商贷 5-30年 6.55%
lilv_array[8][2][5] = 0.0400;//公积金 1～5年 4%
lilv_array[8][2][10] = 0.0450;//公积金 5-30年 4.5%
//20141124新增贷款利率
//14年11月22日基准利率
lilv_array[9] = new Array;
lilv_array[9][1] = new Array;
lilv_array[9][2] = new Array;
lilv_array[9][1][1] = 0.0560;//商贷1年 6%
lilv_array[9][1][3] = 0.0600;//商贷1～3年 6%
lilv_array[9][1][5] = 0.0600;//商贷 3～5年 6%
lilv_array[9][1][10] = 0.0615;//商贷 5-30年 6.15%
lilv_array[9][2][5] = 0.0375;//公积金 1～5年 4%
lilv_array[9][2][10] = 0.0425;//公积金 5-30年 4.5%
//2015年3月25日新增贷款利率
//2015年3月1日基准利率
lilv_array[10] = new Array;
lilv_array[10][1] = new Array;
lilv_array[10][2] = new Array;
lilv_array[10][1][1] = 0.0535;//商贷1年 6%
lilv_array[10][1][3] = 0.0575;//商贷1～3年 6%
lilv_array[10][1][5] = 0.0575;//商贷 3～5年 6%
lilv_array[10][1][10] = 0.0590;//商贷 5-30年 6.15%
lilv_array[10][2][5] = 0.0350;//公积金 1～5年 4%
lilv_array[10][2][10] = 0.0400;//公积金 5-30年 4.5%
///2016最新贷款利率
lilv_array[11] = new Array;
lilv_array[11][1] = new Array;
lilv_array[11][2] = new Array;
lilv_array[11][1][1] = 0.0435;
lilv_array[11][1][3] = 0.0475;
lilv_array[11][1][5] = 0.0475;
lilv_array[11][1][10] = 0.0490;
lilv_array[11][2][5] = 0.02750;
lilv_array[11][2][10] = 0.03250;

function exc_zuhe(fmobj,v){
	//var fmobj=document.calc1;
	if (fmobj.name=="calc1"){
		if (v==3){
			document.getElementById('calc1_zuhe').style.display='block';
			document.getElementById('calc22').style.display='none';
			fmobj.jisuan_radio[1].checked = true;
			exc_js(fmobj,2);
		}else{
			document.getElementById('calc1_zuhe').style.display='none';
			document.getElementById('calc22').style.display='block';
		}
	}else{
		if (v==3){
			document.getElementById('calc2_zuhe').style.display='block';
			document.getElementById('calc22').style.display='none';
			fmobj.jisuan_radio[1].checked = true;
			exc_js(fmobj,2);
		}else{
			document.getElementById('calc2_zuhe').style.display='none';
			document.getElementById('calc22').style.display='block';
		}
	}
}
function exc_js(fmobj,v){
	var div1=document.getElementById("divr1");
	var div2=document.getElementById("divr2");
	if(fmobj.htype[0].checked == true){
		div1.style.display="block";
		div2.style.display="none";
	}else{
		div2.style.display="block";
		div1.style.display="none";
	}
	if (fmobj.name=="calc1"){
		if (v==1){
			document.getElementById('calc1_js_div1').style.display='block';
			document.getElementById('calc1_js_div2').style.display='none';
			document.getElementById('calc1_zuhe').style.display='none';
			fmobj.type.value=1;
		}else{
			document.getElementById('calc1_js_div1').style.display='none';
			document.getElementById('calc1_js_div2').style.display='block';
		}
	}else{
		if (v==1){
			document.getElementById('calc2_js_div1').style.display='block';
			document.getElementById('calc2_js_div2').style.display='none';
			document.getElementById('calc2_zuhe').style.display='none';
			fmobj.type.value=1;
		}else{
			document.getElementById('calc2_js_div1').style.display='none';
			document.getElementById('calc2_js_div2').style.display='block';
		}
	}
}
function formReset(fmobj){
	//var fmobj=document.calc1;
	if (fmobj.name=="calc1"){
		document.getElementById('calc1_js_div1').style.display='block';
		document.getElementById('calc1_js_div2').style.display='none';
		document.getElementById('calc1_zuhe').style.display='none';
		document.getElementById('calc1_benjin').style.display='none';
	}else{
		document.getElementById('calc2_js_div1').style.display='block';
		document.getElementById('calc2_js_div2').style.display='none';
		document.getElementById('calc2_zuhe').style.display='none';
		document.getElementById('calc2_benxi').style.display='none';
	}
}

//验证是否为数字
function reg_Num(str){
	if (str.length==0){return false;}
	var Letters = "1234567890.";

	for (i=0;i<str.length;i++){
		var CheckChar = str.charAt(i);
		if (Letters.indexOf(CheckChar) == -1){return false;}
	}
	return true;
}

//得到利率
function getlilv(lilv_class,type,years){
	var lilv = lilv_class.split('.');

    if(years == 1){
    	 console.log(lilv_array[parseInt(lilv[0])][type][1]*parseInt(lilv[1])/100);
		 return lilv_array[parseInt(lilv[0])][type][1]*parseInt(lilv[1])/100;
	}else if(years > 5){
    	 console.log(lilv_array[parseInt(lilv[0])][type][10]*parseInt(lilv[1])/100);
		 return lilv_array[parseInt(lilv[0])][type][10]*parseInt(lilv[1])/100;
	}else{
		console.log(lilv_array[parseInt(lilv[0])][type][5]*parseInt(lilv[1])/100);
		return lilv_array[parseInt(lilv[0])][type][5]*parseInt(lilv[1])/100;
	}
}

//本金还款的月还款额(参数: 年利率 / 贷款总额 / 贷款总月份 / 贷款当前月0～length-1)
function getMonthMoney2(lilv,total,month,cur_month){
	var lilv_month = lilv / 12;//月利率
	//return total * lilv_month * Math.pow(1 + lilv_month, month) / ( Math.pow(1 + lilv_month, month) -1 );
	var benjin_money = total/month;
	return (total - benjin_money * cur_month) * lilv_month + benjin_money;

}

function showR(data){
	var div1=document.getElementById("divr1");
	var div2=document.getElementById("divr2");
	if(data==1){
		div1.style.display="block";
		div2.style.display="none";
	}else{
		div2.style.display="block";
		div1.style.display="none";
	}
}

//本息还款的月还款额(参数: 年利率/贷款总额/贷款总月份)
function getMonthMoney1(lilv,total,month){
	var lilv_month = lilv / 12;//月利率
	return total * lilv_month * Math.pow(1 + lilv_month, month) / ( Math.pow(1 + lilv_month, month) -1 );
}

function ext_total(fmobj){
	//var fmobj=document.calc1;
	//先清空月还款数下拉框
	// while ((k=fmobj.month_money2.length-1)>=0){
	// 	fmobj.month_money2.options.remove(k);
	// }
	
	var years = fmobj.years.value;
	var month = fmobj.years.value * 12;

	month1.innerHTML = month+"(月)";
	month2.innerHTML = month+"(月)";
	if (fmobj.type.value == 3 ){
		//--  组合型贷款(组合型贷款的计算，只和商业贷款额、和公积金贷款额有关，和按贷款总额计算无关)
			if (!reg_Num(fmobj.total_sy.value)){alert("混合型贷款请填写商贷比例");fmobj.total_sy.focus();return false;}
			if (!reg_Num(fmobj.total_gjj.value)){alert("混合型贷款请填写公积金比例");fmobj.total_gjj.focus();return false;}
			if (fmobj.total_sy.value==null){fmobj.total_sy.value=0;}
			if (fmobj.total_gjj.value==null){fmobj.total_gjj.value=0;}
			var total_sy = fmobj.total_sy.value*10000;
			var total_gjj = fmobj.total_gjj.value*10000;
			fangkuan_total1.innerHTML = "略";//房款总额
			fangkuan_total2.innerHTML = "略";//房款总额
			money_first1.innerHTML = 0;//首期付款
			money_first2.innerHTML = 0;//首期付款

			//贷款总额
			var total_sy = parseInt(fmobj.total_sy.value*10000);
			var total_gjj = parseInt(fmobj.total_gjj.value*10000);
			var daikuan_total = total_sy + total_gjj;
			daikuan_total1.innerHTML = Math.round(daikuan_total);
			daikuan_total2.innerHTML = Math.round(daikuan_total);

			//月还款
			var lilv_sd = getlilv(fmobj.lilv.value,1, years);//得到商贷利率
			var lilv_gjj = getlilv(fmobj.lilv.value,2, years);//得到公积金利率

			//1.本金还款
				//月还款
				var all_total2 = 0;
				var month_money2 = "";
				for(j=0;j<month;j++) {
					//调用函数计算: 本金月还款额
					huankuan = getMonthMoney2(lilv_sd,total_sy,month,j) + getMonthMoney2(lilv_gjj,total_gjj,month,j);
					all_total2 += huankuan;
					huankuan = Math.round(huankuan*100)/100;
					//fmobj.month_money2.options[j] = new Option( (j+1) +"月," + huankuan + "(元)", huankuan);
					month_money2 += (j+1) +"月," + huankuan + "(元)\n";
				}
				_month_money2.value = month_money2;
				//还款总额
				_all_total2.innerHTML = Math.round(all_total2*100)/100;
				//支付利息款
				accrual2.innerHTML = Math.round( (all_total2 - daikuan_total) *100)/100;


			//2.本息还款
				//月均还款
				var month_money1 = getMonthMoney1(lilv_sd,total_sy,month) + getMonthMoney1(lilv_gjj,total_gjj,month);//调用函数计算
				_month_money1.innerHTML = Math.round(month_money1*100)/100 + "(元)";
				//还款总额
				var all_total1 = month_money1 * month;
				_all_total1.innerHTML = Math.round(all_total1*100)/100;
				//支付利息款
				accrual1.innerHTML = Math.round( (all_total1 - daikuan_total) *100)/100;

	}else{
		//--  商业贷款、公积金贷款
			var lilv = getlilv(fmobj.lilv.value,fmobj.type.value, fmobj.years.value);//得到利率
			if (fmobj.jisuan_radio[0].checked == true){
				//------------ 根据单价面积计算
				if (!reg_Num(fmobj.price.value)){alert("请填写单价");fmobj.price.focus();return false;}
				if (!reg_Num(fmobj.sqm.value)){alert("请填写面积");fmobj.sqm.focus();return false;}

				//房款总额
				var fangkuan_total = fmobj.price.value * fmobj.sqm.value;
				fangkuan_total1.innerHTML = fangkuan_total;
				fangkuan_total2.innerHTML = fangkuan_total;
				//贷款总额
				var daikuan_total = (fmobj.price.value * fmobj.sqm.value) * (fmobj.anjie.value/10);
				daikuan_total1.innerHTML = Math.round(daikuan_total);
				daikuan_total2.innerHTML = Math.round(daikuan_total);
				//首期付款
				var money_first = fangkuan_total - daikuan_total;
				money_first1.innerHTML = Math.round(money_first);
				money_first2.innerHTML = Math.round(money_first);
			}else{
				//------------ 根据贷款总额计算
				if (!reg_Num(fmobj.daikuan_total000.value)){alert("请填写贷款总额");fmobj.daikuan_total000.focus();return false;}

				//房款总额
				fangkuan_total1.innerHTML = "略";
				fangkuan_total2.innerHTML = "略";
				//贷款总额
				//var daikuan_total = fmobj.daikuan_total000.value;
				var daikuan_total = fmobj.daikuan_total000.value*10000;
				daikuan_total1.innerHTML = Math.round(daikuan_total);
				daikuan_total2.innerHTML = Math.round(daikuan_total);
				//首期付款
				money_first1.innerHTML = 0;
				money_first2.innerHTML = 0;
			}
			//1.本金还款
				//月还款
				var all_total2 = 0;
				var month_money2 = "";
				for(j=0;j<month;j++) {
					//调用函数计算: 本金月还款额
					huankuan = getMonthMoney2(lilv,daikuan_total,month,j);
					all_total2 += huankuan;
					huankuan = Math.round(huankuan*100)/100;
					//fmobj.month_money2.options[j] = new Option( (j+1) +"月," + huankuan + "(元)", huankuan);
					month_money2 += (j+1) +"月," + huankuan + "(元)\n";
				}
				_month_money2.value = month_money2;
				//还款总额
				_all_total2.innerHTML = Math.round(all_total2*100)/100;
				//支付利息款
				accrual2.innerHTML = Math.round( (all_total2 - daikuan_total) *100)/100;


			//2.本息还款
				//月均还款
				var month_money1 = getMonthMoney1(lilv,daikuan_total,month);//调用函数计算
				_month_money1.innerHTML = Math.round(month_money1*100)/100 + "(元)";
				//还款总额
				var all_total1 = month_money1 * month;
				_all_total1.innerHTML = Math.round(all_total1*100)/100;
				//支付利息款
				accrual1.innerHTML = Math.round( (all_total1 - daikuan_total) *100)/100;
	}
	$('form').hide();
	$('fieldset').show();
	return true
}